@using SMSClient.Models.ViewModel;
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<style>
    .main-container {
        display: flex;
        min-height: 90vh;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .dx-form-container {
        width: 70%;
        border-radius: 5px;
        box-shadow: 0 0 2px 2px rgba(0,0,0,0.1);
        padding: 40px;
    }
</style>


<div class="main-container">

    <div class="dx-fieldset-header">Add a Semester</div>
    <div class="dx-form-container">
    @using (Html.BeginForm("Create", "Semesters", FormMethod.Post))
    {

        @(Html.DevExtreme().Form<SemesterViewModel>()
            .Items(items =>
            {
                items.AddGroup()
                .ColCount(2)
                .Items(groupItems =>
                {
                    groupItems.AddSimpleFor(m => m.ShortName)
                .Editor(e => e.TextBox());

                    groupItems.AddSimpleFor(m => m.LongName)
                .Editor(e => e.TextBox());

                });

                items.AddGroup()
                .ColCount(2)
                .Items(groupItems =>
                {
                    groupItems.AddSimpleFor(m => m.StartDate)
                .Editor(e => e.DateBox());

                    groupItems.AddSimpleFor(m => m.EndDate)
                .Editor(e => e.DateBox());

                });

                items.AddGroup()
                .ColCount(2)
                .Items(groupItems =>
                {
                groupItems.AddSimpleFor(m => m.CourseCodes)
                .Editor(e => e.TagBox().DataSource(d => d.Mvc().LoadAction("GetCourses")).DisplayExpr("LongName").ValueExpr("CourseCode"));
                });

                items.AddGroup()
                .ColCount(2)
                .Items(groupItems =>
                {
                    groupItems.AddSimpleFor(m => m.DepartmentIds)
                .Editor(e => e.TagBox().DataSource(d => d.Mvc().LoadAction("GetDepartments")).DisplayExpr("LongName").ValueExpr("Id"));

                    groupItems.AddSimpleFor(m => m.StudentIds)
                .Editor(e => e.TagBox().DataSource(d => d.Mvc().LoadAction("GetUnassignedStudents")).DisplayExpr("FirstName").ValueExpr("Id"));
                });


                items.AddButton()
                .ButtonOptions(button => button.Text("Add Semester")
                .UseSubmitBehavior(true));
            })
            )

    }
</div>
</div>